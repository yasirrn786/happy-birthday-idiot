<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
    <title>For Fida üéÄ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --primary: #ff6b9d;
            --secondary: #ff8fab;
            --accent: #ffd4e5;
            --bg-dark: #fff5f8;
            --bg-light: #ffe4ef;
            --text-light: #4a4a4a;
            --text-muted: #8b6b7a;
        }
        
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        html, body { 
            overflow: hidden !important; 
            width: 100%;
            height: 100%;
            position: fixed;
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #ffeef8 0%, #ffe0f0 50%, #ffd4e5 100%);
            height: 100vh;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: var(--text-light);
            position: relative;
            touch-action: manipulation;
        }
        
        #finaleOverlay {
            position: fixed;
            inset: 0;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 6s ease-in-out;
            background: radial-gradient(circle at center, #1a0b10 0%, #000000 100%);
        }
        
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 182, 193, 0.2);
            z-index: 1000;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ffb3c6, #ff8fab, #ffc2d1);
            background-size: 200% 100%;
            animation: progressGlow 2s linear infinite;
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
        }
        
        @keyframes progressGlow {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }
        
        .particle { 
            position: fixed; 
            pointer-events: none; 
            z-index: 1;
            filter: blur(0.5px);
            animation: particleFall linear forwards;
        }
        
        @keyframes particleFall { 
            to { 
                transform: translateY(110vh) rotate(360deg); 
                opacity: 0;
            } 
        }
        
        .page { 
            display: none; 
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            width: 92%; 
            max-width: 480px; 
            border-radius: 32px; 
            padding: 40px 28px; 
            text-align: center; 
            box-shadow: 
                0 8px 32px rgba(255, 182, 193, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 182, 193, 0.15);
            animation: pageEnter 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 10;
            will-change: transform, opacity;
            max-height: 85vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .page::-webkit-scrollbar {
            width: 4px;
        }
        
        .page::-webkit-scrollbar-track {
            background: rgba(255, 182, 193, 0.1);
            border-radius: 10px;
        }
        
        .page::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffb3c6, #ff8fab);
            border-radius: 10px;
        }
        
        .page.active { 
            display: block;
            animation: pageEnter 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes pageEnter { 
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.98);
            } 
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            } 
        }
        
        .page.exit-stage-1 {
            animation: exitStage1 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            pointer-events: none;
        }
        
        @keyframes exitStage1 {
            to {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
                filter: blur(10px);
            }
        }
        
        h1 { 
            font-family: 'Dancing Script', cursive;
            font-size: 3.2rem; 
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
            color: #ff6b9d;
            text-shadow: 0 2px 20px rgba(255, 107, 157, 0.2);
        }
        
        p { 
            font-size: 1.05rem;
            font-weight: 400;
            color: var(--text-muted); 
            margin-bottom: 28px;
            line-height: 1.7;
        }
        
        .btn { 
            background: #ff6b9d;
            color: #ffffff;
            border: none; 
            padding: 16px 36px; 
            border-radius: 100px; 
            font-weight: 600; 
            font-size: 1.05rem;
            cursor: pointer; 
            margin-top: 24px;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 20px rgba(255, 139, 171, 0.3);
            position: relative;
            overflow: hidden;
            outline: none;
        }
        
        .btn:hover, .btn:focus {
            transform: translateY(-2px);
            background: #ff4d87;
            box-shadow: 0 8px 28px rgba(255, 139, 171, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .card-stack { 
            display: flex; 
            flex-direction: column; 
            gap: 16px;
            margin: 32px 0;
        }
        
        .flip-card { 
            height: 100px; 
            perspective: 1500px; 
            cursor: pointer;
            opacity: 0;
            animation: cardReveal 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            transform-style: preserve-3d;
        }
        
        .flip-card:nth-child(1) { animation-delay: 0.1s; }
        .flip-card:nth-child(2) { animation-delay: 0.2s; }
        .flip-card:nth-child(3) { animation-delay: 0.3s; }
        
        @keyframes cardReveal {
            from { opacity: 0; transform: translateY(20px) rotateX(-10deg); }
            to { opacity: 1; transform: translateY(0) rotateX(0); }
        }
        
        .flip-inner { 
            position: relative; 
            width: 100%; 
            height: 100%; 
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-inner { 
            transform: rotateY(180deg); 
        }
        
        .front, .back { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            backface-visibility: hidden; 
            border-radius: 20px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            padding: 24px;
            font-weight: 500;
            font-size: 1.05rem;
            border: 1px solid rgba(255, 182, 193, 0.2);
        }
        
        .front {
            background: rgba(255, 255, 255, 0.8);
            color: #ff8fab;
            box-shadow: 0 4px 16px rgba(255, 182, 193, 0.15);
        }
        
        .back { 
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.15), rgba(255, 182, 193, 0.1));
            transform: rotateY(180deg); 
            color: #8b6b7a;
            line-height: 1.6;
        }
        
        .cake-container {
            position: relative;
            display: inline-block;
            margin: 20px 0;
        }
        
        #cake {
            font-size: 7rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            display: inline-block;
            filter: drop-shadow(0 10px 20px rgba(255, 182, 193, 0.3));
            animation: cakeBounce 3s ease-in-out infinite;
        }
        
        @keyframes cakeBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.02); }
        }
        
        #cake:active {
            transform: scale(1.08) rotate(3deg);
            filter: drop-shadow(0 15px 30px rgba(255, 182, 193, 0.4));
        }
        
        /* JAR STYLES - WITH SMALLER, CUTER PARTICLES */
        .jar-container {
            position: relative;
            margin: 20px auto;
            width: 180px;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .jar {
            width: 150px;
            height: 180px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            border-radius: 40px 40px 60px 60px;
            border: 3px solid rgba(255, 182, 193, 0.4);
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 10px 30px rgba(255, 182, 193, 0.3),
                inset 0 2px 10px rgba(255, 255, 255, 0.5);
        }
        
        .jar::before {
            content: '‚ú®';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            animation: jarSparkle 2s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
        }
        
        @keyframes jarSparkle {
            0%, 100% { opacity: 0.4; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.2); }
        }
        
        /* SMALLER, CUTER GOLDEN ORBS */
        .golden-orb {
            position: absolute;
            width: 12px; /* Smaller size */
            height: 12px; /* Smaller size */
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #FFD700, #FFA500);
            box-shadow: 
                0 0 15px rgba(255, 215, 0, 0.7), /* Reduced glow */
                inset 0 0 8px rgba(255, 255, 255, 0.5);
            pointer-events: none;
            z-index: 2;
            animation: orbFloat 5s ease-in-out infinite; /* Slower, cuter float */
            opacity: 0.9;
        }
        
        @keyframes orbFloat {
            0%, 100% { 
                transform: translate(0, 0) scale(1);
            }
            25% { 
                transform: translate(3px, -5px) scale(1.03); /* Smaller movement */
            }
            50% { 
                transform: translate(-2px, -8px) scale(1.06); /* Smaller movement */
            }
            75% { 
                transform: translate(2px, -4px) scale(1.03); /* Smaller movement */
            }
        }
        
        /* Memory Lane Styles */
        .memory-lane {
            max-width: 100% !important;
            width: 100% !important;
            padding: 0 !important;
            background: linear-gradient(180deg, var(--bg-dark) 0%, #fff 50%, #f5f5f5 100%) !important;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            height: 85vh;
        }
        
        .memory-header {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 32px 24px 24px;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 182, 193, 0.2);
            text-align: center;
        }
        
        .memory-header h1 {
            margin-bottom: 8px;
            font-size: 2.5rem;
        }
        
        .memory-subtitle {
            font-size: 0.95rem;
            color: var(--text-muted);
            font-weight: 400;
            margin: 0;
        }
        
        .memory-scroll-container {
            padding: 48px 24px 120px;
            max-width: 640px;
            margin: 0 auto;
        }
        
        .memory-phase {
            margin-bottom: 120px;
            position: relative;
        }
        
        .phase-label {
            font-family: 'Playfair Display', serif;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 64px;
            opacity: 0.6;
        }
        
        .memory-item {
            display: flex;
            gap: 24px;
            align-items: center;
            margin-bottom: 64px;
            opacity: 0;
            transform: translateY(40px);
            transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .memory-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .memory-image-wrap {
            flex-shrink: 0;
            width: 120px;
            height: 120px;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.2), rgba(255, 182, 193, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            box-shadow: 0 8px 32px rgba(255, 182, 193, 0.2);
            border: 1px solid rgba(255, 182, 193, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .memory-image-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
        }
        
        .memory-text {
            flex: 1;
        }
        
        .memory-text h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 12px;
            line-height: 1.3;
        }
        
        .memory-text p {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-muted);
            margin: 0;
        }
        
        .phase-golden .memory-item {
            max-width: 560px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .phase-drift .memory-item.drift-left {
            margin-right: auto;
            margin-left: 0;
            padding-right: 40px;
        }
        
        .phase-drift .memory-item.drift-right {
            margin-left: auto;
            margin-right: 0;
            flex-direction: row-reverse;
            padding-left: 40px;
        }
        
        .phase-now .memory-item.isolated {
            flex-direction: column;
            text-align: center;
            max-width: 400px;
            margin: 0 auto 80px;
            gap: 0;
        }
        
        .phase-now .memory-text.centered {
            text-align: center;
        }
        
        .phase-now .memory-text h3 {
            font-size: 1.6rem;
            margin-bottom: 16px;
            color: #666;
        }
        
        .phase-now .memory-text p {
            font-size: 1.05rem;
            color: #999;
            line-height: 1.9;
        }
        
        .memory-spacer {
            height: 120px;
        }
        
        .phase-now .memory-item.final {
            margin-bottom: 0;
        }
        
        .phase-now .memory-item.final .memory-text h3 {
            color: var(--secondary);
            font-size: 1.8rem;
        }
        
        .phase-now .memory-item.final .memory-text p {
            color: var(--text-muted);
        }
        
        /* Game Styles */
        #gameArea { 
            width: 100%; 
            height: 280px; 
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.5) 0%, 
                rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(10px);
            border-radius: 24px; 
            position: relative; 
            overflow: hidden; 
            border: 1px solid rgba(255, 182, 193, 0.3);
            margin: 20px 0;
            touch-action: none;
            box-shadow: 
                inset 0 2px 16px rgba(255, 192, 203, 0.2),
                0 4px 24px rgba(255, 182, 193, 0.2);
        }
        
        #player, #enemy { 
            position: absolute; 
            width: 48px; 
            height: 48px; 
            font-size: 36px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
            transition: transform 0.05s;
        }
        
        #player { 
            animation: playerFloat 2s ease-in-out infinite; 
        }
        
        @keyframes playerFloat {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }
        
        #timer {
            font-weight: 700;
            font-size: 1.3rem;
            margin: 12px 0;
            color: #ff8fab;
            filter: drop-shadow(0 2px 8px rgba(255, 139, 171, 0.3));
        }
        
        /* Final Note */
        #finalNote { 
            text-align: left; 
            font-size: 1.05rem; 
            line-height: 1.9; 
            color: var(--text-light);
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            padding: 32px; 
            border-radius: 24px; 
            height: 340px; 
            overflow-y: auto; 
            -webkit-overflow-scrolling: touch; 
            border: 1px solid rgba(255, 182, 193, 0.3);
            box-shadow: inset 0 2px 16px rgba(255, 192, 203, 0.2);
            margin-top: 20px;
        }
        
        #finalNote::-webkit-scrollbar {
            width: 6px;
        }
        
        #finalNote::-webkit-scrollbar-track {
            background: rgba(255, 182, 193, 0.1);
            border-radius: 10px;
        }
        
        #finalNote::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffb3c6, #ff8fab);
            border-radius: 10px;
        }
        
        .seal-btn {
            background: transparent !important;
            color: var(--text-light) !important;
            border: 1px solid rgba(255, 182, 193, 0.4) !important;
            box-shadow: 0 0 20px rgba(255, 182, 193, 0.2) !important;
            letter-spacing: 0.2em !important;
            font-weight: 400 !important;
            text-transform: uppercase !important;
            font-size: 0.85rem !important;
            padding: 14px 36px !important;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1) !important;
        }
        
        .seal-btn:hover {
            border-color: rgba(255, 182, 193, 0.8) !important;
            box-shadow: 0 0 40px rgba(255, 182, 193, 0.4) !important;
            transform: translateY(-2px) !important;
        }
        
        /* Finale */
        #grandFinale {
            position: fixed;
            inset: 0;
            z-index: 10000;
            display: none;
            background: radial-gradient(circle at center, #1a0b10 0%, #050203 100%);
            overflow: hidden;
        }
        
        #grandFinale.active {
            display: block;
            animation: finaleBackgroundFade 2s ease-out forwards;
        }
        
        @keyframes finaleBackgroundFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .finale-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            max-width: 700px;
            text-align: center;
            opacity: 0;
            color: rgba(255, 182, 193, 0.9);
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            line-height: 2.3;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-shadow: 0 0 30px rgba(255, 182, 193, 0.4);
            transition: all 1.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .finale-message.focus-in {
            opacity: 1;
            filter: blur(0);
        }
        
        .finale-buttons {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 24px;
            opacity: 0;
        }
        
        .finale-buttons.show {
            display: flex;
            animation: buttonsAppear 2.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes buttonsAppear {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        .finale-btn {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 182, 193, 0.25);
            color: rgba(255, 182, 193, 0.9);
            padding: 18px 48px;
            border-radius: 100px;
            font-size: 1.05rem;
            font-weight: 300;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }
        
        .finale-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 182, 193, 0.6);
            color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 8px 40px rgba(255, 182, 193, 0.3);
            transform: translateY(-3px);
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 182, 193, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.2);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 1000;
        }
        
        .music-control:hover {
            transform: scale(1.1);
        }
        
        @media (max-width: 520px) {
            h1 { font-size: 2.4rem; }
            .page { padding: 32px 20px; }
            #cake { font-size: 6rem; }
            .btn { padding: 14px 28px; }
            .jar-container { width: 150px; height: 200px; }
            .jar { width: 120px; height: 150px; }
            .golden-orb { width: 10px; height: 10px; } /* Even smaller on mobile */
            .finale-message { font-size: 1.1rem; }
            .finale-buttons {
                flex-direction: column;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- UPDATED AUDIO SOURCE WITH CATBOX.MOE LINK -->
    <audio id="bgMusic" loop preload="auto" style="display: none;">
        <source src="https://files.catbox.moe/eui6tr.mp3" type="audio/mpeg">
    </audio>
    
    <div id="finaleOverlay"></div>
    
    <div class="music-control" id="musicControl" onclick="toggleMusic()">
        <span id="musicIcon">üîá</span>
    </div>
    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Page 1: Welcome -->
    <div id="p1" class="page active">
        <h1>Helloww, Fida Ayesha! üíó</h1>
        <p>
            Finally 18, huh?<br><br>
            Since I can't gift you something or meet you in real life,<br>
            I decided to make this little virtual gift just for you.<br><br>
            Hope you like it ü§ç‚ú®
        </p>
        <!-- UPDATED BUTTON TO START MUSIC -->
        <button class="btn" onclick="startMusic(); nav('p2')">For You, Fida ‚ú®</button>
    </div>

    <!-- Page 2: Flip Cards -->
    <div id="p2" class="page">
        <h1>Little Thoughts üíå</h1>
        <p>Flip the cards to discover what's inside üéÄ</p>
        <div class="card-stack">
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-inner">
                    <div class="front">Flip to reveal ‚ú®</div>
                    <div class="back">You're one of the sweetest people I know üíó</div>
                </div>
            </div>
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-inner">
                    <div class="front">Flip to reveal ‚ú®</div>
                    <div class="back">Even when we don't talk, a part of me still cares ü´∂</div>
                </div>
            </div>
            <div class="flip-card" onclick="flipCard(this)">
                <div class="flip-inner">
                    <div class="front">Flip to reveal ‚ú®</div>
                    <div class="back">You deserve everything your heart dreams of ‚ú®</div>
                </div>
            </div>
        </div>
        <button class="btn" onclick="nav('p3')">Continue Journey ‚ú®</button>
    </div>

    <!-- Page 3: Cake -->
    <div id="p3" class="page">
        <h1>Make a Wish üéÇ</h1>
        <p>Since we can't have real cake, click this virtual one! üç∞</p>
        <div class="cake-container">
            <div id="cake" onclick="cut()">üéÇ</div>
        </div>
        <div id="cakeBtn" style="display:none">
            <button class="btn" onclick="nav('p4')">Next Step ‚ú®</button>
        </div>
    </div>

    <!-- Page 4: Wishing Jar -->
    <div id="p4" class="page">
        <h1>Dream Jar ‚ú®</h1>
        <p>Type a wish and let the universe hear it...</p>
        
        <div class="jar-container">
            <div class="jar" id="jar">
                <!-- Smaller, cuter golden orbs will be added here -->
            </div>
        </div>
        
        <input type="text" id="wishIn" placeholder="Type your wish..." style="
            width: 90%;
            padding: 16px 20px;
            border-radius: 16px;
            border: 1px solid rgba(255, 182, 193, 0.3);
            outline: none;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.7);
            color: var(--text-light);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        " onkeypress="if(event.key === 'Enter') addGoldenOrb()">
        
        <button class="btn" onclick="addGoldenOrb()">Send Wish ‚ú®</button>
        
        <div id="jarNext" style="display:none; margin-top: 20px;">
            <button class="btn" onclick="nav('p5')">Continue to Memory Lane ‚ú®</button>
        </div>
    </div>

    <!-- Page 5: Memory Lane -->
    <div id="p5" class="page memory-lane">
        <div class="memory-header">
            <h1>Memory Lane</h1>
            <p class="memory-subtitle">A journey through time üï∞Ô∏èüí≠</p>
        </div>
        
        <div class="memory-scroll-container">
            <div class="memory-phase phase-golden">
                <div class="phase-label">The Beginning</div>
                
                <div class="memory-item" data-phase="golden">
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/sfda8f.jpg" alt="When it all started" loading="lazy">
                    </div>
                    <div class="memory-text">
                        <h3>When it all started</h3>
                        <p>Two strangers who became friends, then best friends, then... something more than words could ever capture.</p>
                    </div>
                </div>
                
                <div class="memory-item" data-phase="golden">
                    <div class="memory-text">
                        <h3>The late-night calls</h3>
                        <p>Hours would pass like minutes. We'd laugh until our stomachs hurt, share secrets, dream out loud.</p>
                    </div>
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/11a8xk.jpg" alt="The late-night calls" loading="lazy">
                    </div>
                </div>
                
                <div class="memory-item" data-phase="golden">
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/x28tkv.jpg" alt="Simple contact" loading="lazy">
                    </div>
                    <div class="memory-text">
                        <h3>Simple contact</h3>
                        <p>When it happened, it happened. When it didn't, that was okay.</p>
                    </div>
                </div>
            </div>
            
            <div class="memory-phase phase-drift">
                <div class="phase-label">The Distance</div>
                
                <div class="memory-item drift-left" data-phase="drift">
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/6f4dfa.jpg" alt="When life got busy" loading="lazy">
                    </div>
                    <div class="memory-text">
                        <h3>When life got busy</h3>
                        <p>The calls became shorter. The messages less frequent. Not because we cared less... but because time became cruel.</p>
                    </div>
                </div>
                
                <div class="memory-item drift-right" data-phase="drift">
                    <div class="memory-text">
                        <h3>Different worlds</h3>
                        <p>We started living in parallel universes. Same sky, different stars. so close yet so far.</p>
                    </div>
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/on7gfp.jpg" alt="Different worlds" loading="lazy">
                    </div>
                </div>
                
                <div class="memory-item drift-left" data-phase="drift">
                    <div class="memory-image-wrap">
                        <img src="https://files.catbox.moe/n754r4.jpg" alt="Quiet moments" loading="lazy">
                    </div>
                    <div class="memory-text">
                        <h3>Quiet moments</h3>
                        <p>A thought would come, and be left there</p>
                    </div>
                </div>
            </div>
            
            <div class="memory-phase phase-now">
                <div class="phase-label">The Now</div>
                
                <div class="memory-item isolated" data-phase="now">
                    <div class="memory-text centered">
                        <h3>Miles apart</h3>
                        <p>But somehow... we are still here. In every memory that refuses to fade.</p>
                    </div>
                </div>
                
                <div class="memory-spacer"></div>
                
                <div class="memory-item isolated" data-phase="now">
                    <div class="memory-text centered">
                        <h3>Still caring</h3>
                        <p>Even when we don't talk. Even when weeks pass. You matter. You always will.</p>
                    </div>
                </div>
                
                <div class="memory-spacer"></div>
                
                <div class="memory-item isolated final" data-phase="now">
                    <div class="memory-text centered">
                        <h3>Forever connected</h3>
                        <p>Because some bonds don't break with distance. They just... transform. And ours? i'd say i would like to keep it forever.</p>
                    </div>
                </div>
            </div>
            
            <button class="btn" onclick="nav('p6')">Continue ‚ú®</button>
        </div>
    </div>

    <!-- Page 6: Game -->
    <div id="p6" class="page">
        <h1>Escape Challenge üòà</h1>
        <p>Move to survive for 10 seconds!</p>
        <div id="gameArea">
            <div id="player" style="left:50%; top:80%;">üßç‚Äç‚ôÄÔ∏è</div>
            <div id="enemy" style="left:20%; top:20%;">üòà</div>
        </div>
        <p id="timer">Survive: 10s</p>
        <button class="btn" onclick="nav('p7')" style="background: rgba(255, 182, 193, 0.2); color: var(--text-muted); margin-left: 10px;">Skip Challenge</button>
    </div>

    <!-- Page 7: Final Note -->
    <div id="p7" class="page">
        <h1>Final Note üíå</h1>
        <p>One last surprise awaits...</p>
        <div id="finalNote"><span id="typed"></span></div>
        <button class="btn seal-btn" onclick="startGrandFinale()">Seal the Journey</button>
    </div>

    <!-- Grand Finale -->
    <div id="grandFinale">
        <div id="finaleMessages"></div>
        <div class="finale-buttons" id="finaleButtons">
            <button class="finale-btn" onclick="finalClose()">Close ü´∂</button>
            <button class="finale-btn" onclick="resetExperience()">Experience Again</button>
        </div>
    </div>

    <script>
        'use strict';
        
        let currentPage = 1;
        const totalPages = 7;
        let gameInitialized = false;
        let music = null;
        let musicPlaying = false;
        let audioUnlocked = false;
        let wishCount = 0;
        let firstFlip = false;
        
        function nav(id) {
            // Simple haptic feedback
            if ('vibrate' in navigator) {
                navigator.vibrate(10);
            }
            
            const current = document.querySelector('.page.active');
            const next = document.getElementById(id);
            
            if (current && next) {
                current.classList.add('exit-stage-1');
                setTimeout(() => {
                    current.classList.remove('active', 'exit-stage-1');
                    next.classList.add('active');
                    
                    currentPage = parseInt(id.replace('p', '')) || 1;
                    document.getElementById('progressBar').style.width = (currentPage / totalPages * 100) + '%';
                    
                    // Small confetti on page change
                    confetti({ 
                        particleCount: Math.min(30, window.innerWidth / 15),
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#ffb3c6', '#ff8fab', '#ffc2d1'],
                        ticks: 100
                    });
                }, 400);
            }
            
            // Initialize specific pages
            if (id === 'p5') initMemoryLane();
            if (id === 'p6' && !gameInitialized) initGame();
            if (id === 'p7') unwrap();
        }
        
        // NEW FUNCTION: Start music on first button click
        function startMusic() {
            if (!music) {
                music = document.getElementById('bgMusic');
                music.volume = 0.3; // Comfortable volume
            }
            
            if (!audioUnlocked) {
                music.play()
                    .then(() => {
                        musicPlaying = true;
                        audioUnlocked = true;
                        document.getElementById('musicIcon').textContent = 'üîä';
                        console.log('Music started successfully');
                    })
                    .catch(error => {
                        console.log('Music play error:', error);
                    });
            }
        }
        
        async function toggleMusic() {
            if (!music) {
                music = document.getElementById('bgMusic');
                music.volume = 0.3;
            }
            
            try {
                if (musicPlaying) {
                    music.pause();
                    document.getElementById('musicIcon').textContent = 'üîá';
                    musicPlaying = false;
                } else {
                    // If not unlocked yet, unlock first
                    if (!audioUnlocked) {
                        music.currentTime = 0;
                        const playPromise = music.play();
                        if (playPromise !== undefined) {
                            await playPromise;
                            audioUnlocked = true;
                        }
                    } else {
                        await music.play();
                    }
                    document.getElementById('musicIcon').textContent = 'üîä';
                    musicPlaying = true;
                }
            } catch (e) {
                console.log('Toggle music error:', e);
            }
        }
        
        function flipCard(card) {
            card.classList.toggle('flipped');
            
            // Start music on first flip if not already started
            if (!firstFlip && !audioUnlocked) {
                firstFlip = true;
                setTimeout(() => {
                    startMusic();
                }, 300);
            }
            
            // Confetti when flipped
            if (card.classList.contains('flipped')) {
                confetti({ 
                    particleCount: 15,
                    spread: 50,
                    origin: { x: 0.5, y: 0.7 },
                    colors: ['#ffb3c6', '#ff8fab', '#ffc2d1']
                });
            }
        }
        
        function cut() {
            const cake = document.getElementById('cake');
            cake.textContent = 'üç∞';
            cake.style.animation = 'none';
            document.getElementById('cakeBtn').style.display = 'block';
            
            // Big confetti for cake cut
            confetti({ 
                particleCount: 100,
                spread: 80,
                origin: { y: 0.6 },
                colors: ['#ffb3c6', '#ff8fab', '#ffc2d1'],
                ticks: 150
            });
        }
        
        function initMemoryLane() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, 200);
                    }
                });
            }, { threshold: 0.2 });
            
            document.querySelectorAll('.memory-item').forEach(item => {
                observer.observe(item);
            });
        }
        
        function addGoldenOrb() {
            const input = document.getElementById('wishIn');
            const wish = input.value.trim();
            
            if (!wish) return;
            
            const jar = document.getElementById('jar');
            const orb = document.createElement('div');
            orb.className = 'golden-orb';
            
            // Random position in jar for smaller particles
            const x = Math.random() * 90 + 30; // Adjusted for smaller particles
            const y = Math.random() * 110 + 40; // Adjusted for smaller particles
            
            orb.style.left = `${x}px`;
            orb.style.top = `${y}px`;
            orb.style.animationDelay = `${Math.random() * 2}s`;
            
            jar.appendChild(orb);
            wishCount++;
            
            // Show next button after 1 wish
            if (wishCount >= 1) {
                document.getElementById('jarNext').style.display = 'block';
            }
            
            input.value = '';
            
            // Small confetti for wish
            confetti({ 
                particleCount: 10, // Fewer particles for cuter effect
                spread: 60,
                origin: { y: 0.6 },
                colors: ['#FFD700', '#FFA500'],
                ticks: 80
            });
        }
        
        function initGame() {
            if (gameInitialized) return;
            gameInitialized = true;
            
            const area = document.getElementById('gameArea');
            const player = document.getElementById('player');
            const enemy = document.getElementById('enemy');
            let gameRunning = false;
            let gameStartTime = 0;
            let playerX = 50, playerY = 80;
            let enemyX = 20, enemyY = 20;
            
            function updateGame(currentTime) {
                if (!gameRunning) return;
                
                const elapsed = (currentTime - gameStartTime) / 1000;
                const timeLeft = Math.max(0, 10 - elapsed);
                
                document.getElementById('timer').textContent = `Survive: ${Math.ceil(timeLeft)}s`;
                
                if (timeLeft <= 0) {
                    gameRunning = false;
                    confetti({ particleCount: 150, spread: 120, origin: { y: 0.6 } });
                    setTimeout(() => nav('p7'), 1000);
                    return;
                }
                
                // Update enemy position (chases player)
                const dx = playerX - enemyX;
                const dy = playerY - enemyY;
                const dist = Math.sqrt(dx * dx + dy * dy);
                
                if (dist > 0) {
                    enemyX += (dx / dist) * 0.8;
                    enemyY += (dy / dist) * 0.8;
                }
                
                enemy.style.left = enemyX + '%';
                enemy.style.top = enemyY + '%';
                
                // Check collision
                if (Math.abs(playerX - enemyX) < 5 && Math.abs(playerY - enemyY) < 5) {
                    gameRunning = false;
                    document.getElementById('timer').textContent = 'üòà Caught! Try again';
                    setTimeout(() => {
                        document.getElementById('timer').textContent = 'Survive: 10s';
                        playerX = 50; playerY = 80;
                        enemyX = 20; enemyY = 20;
                        player.style.left = '50%';
                        player.style.top = '80%';
                        enemy.style.left = '20%';
                        enemy.style.top = '20%';
                    }, 1500);
                    return;
                }
                
                requestAnimationFrame(updateGame);
            }
            
            function movePlayer(x, y) {
                const rect = area.getBoundingClientRect();
                playerX = ((x - rect.left) / rect.width) * 100;
                playerY = ((y - rect.top) / rect.height) * 100;
                
                // Keep player inside area
                playerX = Math.max(5, Math.min(playerX, 95));
                playerY = Math.max(5, Math.min(playerY, 95));
                
                player.style.left = playerX + '%';
                player.style.top = playerY + '%';
                
                if (!gameRunning) {
                    gameRunning = true;
                    gameStartTime = performance.now();
                    requestAnimationFrame(updateGame);
                }
            }
            
            // Mouse controls
            area.addEventListener('mousemove', (e) => movePlayer(e.clientX, e.clientY));
            
            // Touch controls
            area.addEventListener('touchmove', (e) => {
                e.preventDefault();
                movePlayer(e.touches[0].clientX, e.touches[0].clientY);
            }, { passive: false });
        }
        
        function unwrap() {
            const msg = `Fida, if you're reading this‚Ä¶ thank you.

Thank you for being you. For changing my life in ways I didn't even know I needed. Honestly, a lot of the things I do now such making websites, apps, etc etc I don't think I'd have the courage to do if you weren't in my life. You taught me to believe in me, you kept cheering me on, or just being that constant presence I could rely on.

Even if we don't talk every day, even if life gets busy, even if we drift a little‚Ä¶ you matter to me more than I'll ever be able to say. You're kind, sweet, insanely talented and yet brainless and dumb, but you deserve every bit of happiness, every dream, every little joy life can give.

I miss the old days so much. When we'd call for no reason, laugh over the silliest things etc. You never failed to be there when I needed someone to vent to, someone to lean on. You've been my safe space.

It's been almost 8 years since we first met (including our "enemies era" cause aperently one of us trusted a random brat instead of each other üíÄ). Still‚Ä¶ here we are.

HAPPY BIRTHDAY AGAIN!!, FIDA. I hope this year gives you everything your heart wishes for. And even if I'm not always right there beside you, know this I care. I always will.

And lastly‚Ä¶ I love you a lot, dumbass. More than I'll ever be able to put into words. And that's never gonna change. ü´∂`;
            
            let i = 0;
            const typed = document.getElementById('typed');
            function type() {
                if (i < msg.length) {
                    typed.innerHTML += msg.charAt(i);
                    i++;
                    setTimeout(type, 35);
                }
            }
            type();
        }
        
        function startGrandFinale() {
            const page = document.getElementById('p7');
            page.classList.add('exit-stage-1');
            
            setTimeout(() => {
                page.style.display = 'none';
                
                const finaleOverlay = document.getElementById('finaleOverlay');
                finaleOverlay.style.opacity = '1';
                
                // Show the tribute
                const finale = document.getElementById('grandFinale');
                finale.classList.add('active');
                
                const messages = [
                    "2139+ lines of code. Hundreds of errors. Countless hours of debugging and coffee. I hope all this effort made you smile, even just for a little bit.",
                    "If it did, all the hard work on this website is completely worth it. I don't care how hard it was to build.",
                    "Thank you, Fida Ayesha, for being you. You mean a lot to me.",
                    "Thank you."
                ];
                
                showMessagesSequentially(messages);
            }, 800);
        }
        
        async function showMessagesSequentially(messages) {
            const container = document.getElementById('finaleMessages');
            
            for (let i = 0; i < messages.length; i++) {
                container.innerHTML = '';
                
                const msgDiv = document.createElement('div');
                msgDiv.className = 'finale-message';
                msgDiv.textContent = messages[i];
                container.appendChild(msgDiv);
                
                setTimeout(() => msgDiv.classList.add('focus-in'), 100);
                
                await new Promise(resolve => setTimeout(resolve, i === 0 ? 7000 : 5000));
                
                msgDiv.classList.remove('focus-in');
                msgDiv.style.opacity = '0';
                
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            setTimeout(() => {
                document.getElementById('finaleButtons').classList.add('show');
            }, 1000);
        }
        
        function finalClose() {
            // Stop music
            if (music) {
                music.volume = 0;
                music.pause();
            }
            
            // Close the tab immediately
            window.close();
        }
        
        function resetExperience() {
            location.reload();
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize music element
            music = document.getElementById('bgMusic');
            music.volume = 0.3;
            
            document.getElementById('progressBar').style.width = (1 / totalPages * 100) + '%';
        });
    </script>
</body>
</html>